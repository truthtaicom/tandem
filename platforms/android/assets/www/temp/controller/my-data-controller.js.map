{"version":3,"sources":["controller/my-data-controller.es6"],"names":[],"mappings":"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","file":"controller/my-data-controller.js","sourcesContent":["class MyDataController {\n\tconstructor (languageSettings, LanguageService, ActivitiesService, DataService, FilterService) {\n\t\t// DI\n\t\tthis.languageSettings = languageSettings;\n\t\tthis.LanguageService = LanguageService;\n\t\tthis.ActivitiesService = ActivitiesService;\n\t\tthis.DataService = DataService;\n\t\tthis.FilterService = FilterService;\n\t\t// local vars\n\t\tthis.myDataForm = {};\n\t\tthis.formState = {\n\t\t\tsubmitted: false,\n\t\t\tsuccess: false,\n\t\t\terror: false\n\t\t};\n\t\tthis.userData = localStorage.getItem('tandemApp_userData') ? JSON.parse(localStorage.getItem('tandemApp_userData')) : {\n\t\t\tname: '',\n\t\t\temail: '',\n\t\t\tzip: '',\n\t\t\tcity: '',\n\t\t\tdescription: '',\n\t\t\tlang_have_id: this.ActivitiesService.offerId,\n\t\t\tlang_seek_id: this.ActivitiesService.searchId\n\t\t};\n\t\tthis.language = this.LanguageService.selectedLanguage;\n\t\tthis.activities = this.ActivitiesService.activities;\n\t\tthis.updateLangObjects();\n\t}\n\tupdateLangObjects () {\n\t\tthis.lang_have = this.FilterService.filterObjectFromArray(this.activities, 'id', this.userData.lang_have_id);\n\t\tthis.lang_seek = this.FilterService.filterObjectFromArray(this.activities, 'id', this.userData.lang_seek_id);\n\t}\n\tsubmitForm () {\n\t\t/*\n\t\t * set form to submitted = true\n\t\t */\n\t\tthis.formState.submitted = true;\n\t\tif (this.myDataForm.$valid) {\n\t\t\t/*\n\t\t\t * update lang_have_id && lang_seek_id\n\t\t\t */\n\t\t\tthis.userData.lang_have_id = this.lang_have.id;\n\t\t\tthis.userData.lang_seek_id = this.lang_seek.id;\n\t\t\t/*\n\t\t\t * submit\n\t\t\t */\n\t\t\tif (typeof this.userData.token !== 'undefined') {\n\t\t\t\t/**\n\t\t\t\t * change / update\n\t\t\t\t */\n\t\t\t\tthis.DataService.postChange(this.userData).then((data) => {\n\t\t\t\t\tif (data.data.toString() === 'true') {\n\t\t\t\t\t\tlocalStorage.setItem('tandemApp_userData', JSON.stringify(this.userData));\n\t\t\t\t\t\tthis.formState.success = true;\n\t\t\t\t\t\tthis.formState.error = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t\t}\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * register\n\t\t\t\t */\n\t\t\t\tthis.userData.lat = typeof window.latitude !== 'undefined' ? window.latitude : 0;\n\t\t\t\tthis.userData.lon = typeof window.longitude !== 'undefined' ? window.longitude : 0;\n\t\t\t\tthis.userData.lang_used = this.language;\n\t\t\t\tthis.DataService.postRegistration(this.userData).then((data) => {\n\t\t\t\t\tif (typeof data.data.token !== 'undefined') {\n\t\t\t\t\t\tthis.userData = data.data;\n\t\t\t\t\t\tlocalStorage.setItem('tandemApp_userData', JSON.stringify(this.userData));\n\t\t\t\t\t\tthis.formState.success = true;\n\t\t\t\t\t\tthis.formState.error = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t\t}\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nMyDataController.$inject = ['languageSettings', 'LanguageService', 'ActivitiesService', 'DataService', 'FilterService'];\n\nexport { MyDataController };\n"],"sourceRoot":"/source/"}