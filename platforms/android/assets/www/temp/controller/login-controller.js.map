{"version":3,"sources":["controller/login-controller.es6"],"names":[],"mappings":";;;;;;;;;;IAAM;AACF,aADE,eACF,CAAa,gBAAb,EAA+B,eAA/B,EAAgD,SAAhD,EAA2D,WAA3D,EAAwE,MAAxE,EAAgF;8BAD9E,iBAC8E;;;AAE5E,aAAK,gBAAL,GAAwB,gBAAxB,CAF4E;AAG5E,aAAK,eAAL,GAAuB,eAAvB,CAH4E;AAI5E,aAAK,WAAL,GAAmB,WAAnB,CAJ4E;AAK5E,aAAK,MAAL,GAAc,MAAd,CAL4E;AAM5E,aAAK,SAAL,GAAiB,SAAjB;;AAN4E,YAQ5E,CAAK,SAAL,GAAiB,EAAjB,CAR4E;AAS5E,aAAK,SAAL,GAAiB;AACb,uBAAW,KAAX;AACA,mBAAO,KAAP;SAFJ,CAT4E;AAa5E,aAAK,QAAL,GAAgB;AACZ,sBAAU,EAAV;AACA,sBAAU,EAAV;SAFJ,CAb4E;AAiB5E,aAAK,KAAL,GAAa,aAAa,OAAb,CAAqB,oBAArB,IAA6C,KAAK,KAAL,CAAW,aAAa,OAAb,CAAqB,oBAArB,CAAX,EAAuD,KAAvD,GAA+D,IAA5G,CAjB+D;AAkB5E,YAAI,KAAK,KAAL,EAAY;AACZ,iBAAK,SAAL,CAAe,IAAf,CAAoB,WAApB,EADY;SAAhB;KAlBJ;;iBADE;;iCAyBQ;;;AACN,gBAAI,WAAW;AACX,0BAAU,OAAO,YAAP,CAAoB,GAApB,CAAwB,KAAK,QAAL,CAAc,QAAd,EAAwB,KAAK,MAAL,CAA1D;AACA,0BAAU,OAAO,YAAP,CAAoB,GAApB,CAAwB,KAAK,QAAL,CAAc,QAAd,EAAwB,KAAK,MAAL,CAA1D;aAFA,CADE;AAKN,iBAAK,SAAL,CAAe,SAAf,GAA2B,IAA3B,CALM;;AAON,gBAAI,KAAK,SAAL,CAAe,MAAf,EAAuB;AACvB,qBAAK,WAAL,CAAiB,SAAjB,CAA2B,QAA3B,EAAqC,IAArC,CAA0C,UAAC,IAAD,EAAU;AAChD,wBAAI,KAAK,IAAL,CAAU,QAAV,OAAyB,OAAzB,EAAkC;;AAElC,4BAAI,WAAW,KAAK,IAAL;;AAFmB,gCAIlC,CAAS,KAAT,GAAiB,MAAK,QAAL,CAAc,QAAd;;AAJiB,6BAMlC,CAAK,QAAL,GAAgB,QAAhB;;AANkC,oCAQlC,CAAa,OAAb,CAAqB,oBAArB,EAA2C,KAAK,SAAL,CAAe,MAAK,QAAL,CAA1D,EARkC;AASlC,8BAAK,SAAL,CAAe,IAAf,CAAoB,WAApB,EATkC;qBAAtC,MAUO;AACH,8BAAK,SAAL,CAAe,KAAf,GAAuB,IAAvB,CADG;qBAVP;iBADsC,EAcvC,YAAM;AACL,0BAAK,SAAL,CAAe,KAAf,GAAuB,IAAvB,CADK;iBAAN,CAdH,CADuB;aAA3B;;;;WAhCF;;;AAuDN,gBAAgB,OAAhB,GAA0B,CAAC,kBAAD,EAAqB,iBAArB,EAAwC,WAAxC,EAAqD,aAArD,EAAoE,QAApE,CAA1B;;QAES","file":"controller/login-controller.js","sourcesContent":["class LoginController {\n    constructor (languageSettings, LanguageService, $location, DataService, encKey) {\n        // DI\n        this.languageSettings = languageSettings;\n        this.LanguageService = LanguageService;\n        this.DataService = DataService;\n        this.encKey = encKey;\n        this.$location = $location;\n        // local vars\n        this.loginForm = {};\n        this.formState = {\n            submitted: false,\n            error: false\n        };\n        this.userData = {\n            username: '',\n            password: ''\n        };\n        this.token = localStorage.getItem('tandemApp_userData') ? JSON.parse(localStorage.getItem('tandemApp_userData')).token : null;\n        if (this.token) {\n            this.$location.path('/settings');\n        }\n\n    }\n\n    submit () {\n        let postData = {\n            username: window.GibberishAES.enc(this.userData.username, this.encKey),\n            password: window.GibberishAES.enc(this.userData.password, this.encKey)\n        };\n        this.formState.submitted = true;\n\n        if (this.loginForm.$valid) {\n            this.DataService.postLogin(postData).then((data) => {\n                if (data.data.toString() !== 'false') {\n                    // save as temp var\n                    let userData = data.data;\n                    // add email\n                    userData.email = this.userData.username;\n                    // overwrite old data\n                    this.userData = userData;\n                    // and save in localstorage\n                    localStorage.setItem('tandemApp_userData', JSON.stringify(this.userData));\n                    this.$location.path('/settings');\n                } else {\n                    this.formState.error = true;\n                }\n            }, () => {\n                this.formState.error = true;\n            });\n\n        }\n    }\n}\n\nLoginController.$inject = ['languageSettings', 'LanguageService', '$location', 'DataService', 'encKey'];\n\nexport { LoginController };\n"],"sourceRoot":"/source/"}