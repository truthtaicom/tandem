{"version":3,"sources":["controller/login-controller.es6"],"names":[],"mappings":";;;;;;;;;;IAAM,eAAe;AACpB,UADK,eAAe,CACP,gBAAgB,EAAE,eAAe,EAAE,SAAS,EAAE,WAAW,EAAE,MAAM,EAAE;wBAD3E,eAAe;;;AAGnB,MAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;AACzC,MAAI,CAAC,eAAe,GAAG,eAAe,CAAC;AACvC,MAAI,CAAC,WAAW,GAAG,WAAW,CAAC;AAC/B,MAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,MAAI,CAAC,SAAS,GAAG,SAAS;;AAAC,AAE3B,MAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACpB,MAAI,CAAC,SAAS,GAAG;AAChB,YAAS,EAAE,KAAK;AAChB,QAAK,EAAE,KAAK;GACZ,CAAC;AACF,MAAI,CAAC,QAAQ,GAAG;AACf,WAAQ,EAAE,EAAE;AACZ,WAAQ,EAAE,EAAE;GACZ,CAAC;AACF,MAAI,CAAC,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;AAC9H,MAAI,IAAI,CAAC,KAAK,EAAE;AACf,OAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;GACjC;EAED;;cAvBI,eAAe;;2BAwBV;;;AACT,OAAI,QAAQ,GAAG;AACd,YAAQ,EAAE,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;AACtE,YAAQ,EAAE,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;IACtE,CAAC;AACF,OAAI,CAAC,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC;;AAEhC,OAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;AAC1B,QAAI,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI,EAAK;AACnD,SAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,OAAO,EAAE;AACrC,UAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;AACzB,cAAQ,CAAC,KAAK,GAAG,MAAK,QAAQ,CAAC,QAAQ,CAAC;AACxC,kBAAY,CAAC,OAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;AACrE,YAAK,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;MACjC,MAAM;AACN,YAAK,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;MAC5B;KACD,EAAE,YAAM;AACR,WAAK,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;KAC5B,CAAC,CAAC;IAEH;GACD;;;QA9CI,eAAe;;;AAiDrB,eAAe,CAAC,OAAO,GAAG,CAAC,kBAAkB,EAAE,iBAAiB,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,CAAC,CAAC;;QAE/F,eAAe,GAAf,eAAe","file":"controller/login-controller.js","sourcesContent":["class LoginController {\n\tconstructor (languageSettings, LanguageService, $location, DataService, encKey) {\n\t\t// DI\n\t\tthis.languageSettings = languageSettings;\n\t\tthis.LanguageService = LanguageService;\n\t\tthis.DataService = DataService;\n\t\tthis.encKey = encKey;\n\t\tthis.$location = $location;\n\t\t// local vars\n\t\tthis.loginForm = {};\n\t\tthis.formState = {\n\t\t\tsubmitted: false,\n\t\t\terror: false\n\t\t};\n\t\tthis.userData = {\n\t\t\tusername: '',\n\t\t\tpassword: ''\n\t\t};\n\t\tthis.token = localStorage.getItem('tandemApp_userData') ? JSON.parse(localStorage.getItem('tandemApp_userData')).token : null;\n\t\tif (this.token) {\n\t\t\tthis.$location.path('/settings');\n\t\t}\n\n\t}\n\tsubmit () {\n\t\tlet postData = {\n\t\t\tusername: window.GibberishAES.enc(this.userData.username, this.encKey),\n\t\t\tpassword: window.GibberishAES.enc(this.userData.password, this.encKey)\n\t\t};\n\t\tthis.formState.submitted = true;\n\n\t\tif (this.loginForm.$valid) {\n\t\t\tthis.DataService.postLogin(postData).then((data) => {\n\t\t\t\tif (data.data.toString() !== 'false') {\n\t\t\t\t\tlet userData = data.data;\n\t\t\t\t\tuserData.email = this.userData.username;\n\t\t\t\t\tlocalStorage.setItem('tandemApp_userData', JSON.stringify(userData));\n\t\t\t\t\tthis.$location.path('/settings');\n\t\t\t\t} else {\n\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t}\n\t\t\t}, () => {\n\t\t\t\tthis.formState.error = true;\n\t\t\t});\n\n\t\t}\n\t}\n}\n\nLoginController.$inject = ['languageSettings', 'LanguageService', '$location', 'DataService', 'encKey'];\n\nexport { LoginController };\n"],"sourceRoot":"/source/"}