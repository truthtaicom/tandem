{"version":3,"sources":["controller/my-data-controller.es6"],"names":[],"mappings":"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","file":"controller/my-data-controller.js","sourcesContent":["class MyDataController {\n\tconstructor (languageSettings, LanguageService, ActivitiesService, DataService) {\n\t\t// DI\n\t\tthis.languageSettings = languageSettings;\n\t\tthis.LanguageService = LanguageService;\n\t\tthis.ActivitiesService = ActivitiesService;\n\t\tthis.DataService = DataService;\n\t\t// local vars\n\t\tthis.myDataForm = {};\n\t\tthis.formState = {\n\t\t\tsubmitted: false,\n\t\t\tsuccess: false,\n\t\t\terror: false\n\t\t};\n\t\tthis.userData = localStorage.getItem('tandemApp_userData') ? JSON.parse(localStorage.getItem('tandemApp_userData')) : {\n\t\t\tname: '',\n\t\t\temail: '',\n\t\t\tzip: '',\n\t\t\tcity: '',\n\t\t\tdescription: '',\n\t\t\tlang_have: this.ActivitiesService.offerId,\n\t\t\tlang_seek: this.ActivitiesService.searchId\n\t\t};\n\t\tthis.language = this.LanguageService.selectedLanguage;\n\t\tthis.activities = this.ActivitiesService.activities;\n\t\tthis.offerObj = this.ActivitiesService.offerObj;\n\t\tthis.searchObj = this.ActivitiesService.searchObj;\n\t}\n\tchangeOffer () {\n\t\tthis.ActivitiesService.offerId = this.offerObj.id;\n\t\tthis.ActivitiesService.update();\n\t}\n\tchangeSearch () {\n\t\tthis.ActivitiesService.searchId = this.searchObj.id;\n\t\tthis.ActivitiesService.update();\n\t}\n\tsubmitForm () {\n\t\tconsole.log('submitForm');\n\t\tthis.formState.submitted = true;\n\t\tif (this.myDataForm.$valid) {\n\t\tif (typeof this.userData.token !== 'undefined') {\n\t\t\t\t/**\n\t\t\t\t * change / update\n\t\t\t\t */\n\t\t\t\tthis.DataService.postChange(this.userData).then((data) => {\n\t\t\t\t\tif (data.data.toString() === 'true') {\n\t\t\t\t\t\tconsole.log('SUCCESS');\n\t\t\t\t\t\tlocalStorage.setItem('tandemApp_userData', JSON.stringify(this.userData));\n\t\t\t\t\t\tthis.formState.success = true;\n\t\t\t\t\t\tthis.formState.error = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t\t}\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * register\n\t\t\t\t */\n\t\t\t\tthis.userData.lat = typeof window.latitude !== 'undefined' ? window.latitude : 0;\n\t\t\t\tthis.userData.lon = typeof window.longitude !== 'undefined' ? window.longitude : 0;\n\t\t\t\tthis.userData.lang_used = this.language;\n\t\t\t\tthis.DataService.postRegistration(this.userData).then((data) => {\n\t\t\t\t\tconsole.log('data : ', data.data.token);\n\t\t\t\t\tif (typeof data.data.token !== 'undefined') {\n\t\t\t\t\t\tlocalStorage.setItem('tandemApp_userData', JSON.stringify(data.data));\n\t\t\t\t\t\tthis.formState.success = true;\n\t\t\t\t\t\tthis.formState.error = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t\t}\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.formState.success = false;\n\t\t\t\t\tthis.formState.error = true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nMyDataController.$inject = ['languageSettings', 'LanguageService', 'ActivitiesService', 'DataService'];\n\nexport { MyDataController };\n"],"sourceRoot":"/source/"}